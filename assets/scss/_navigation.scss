// Import breakpoints
@use 'breakpoints' as *;

/**
 * Navigation Styles - Mega Menu
 * Rebuilt from ground up for optimal performance and UX
 */

/* ============================================
   Main Navigation Container
   ============================================ */

.main-navigation {
	position: static;
	display: none;
	justify-content: center;
	align-items: stretch;
	grid-column: 2;
	height: 100%;
	
	@include lg-up {
		display: flex;
	}
}

/* ============================================
   Menu List - Root Level
   ============================================ */

.pure-menu-list {
	display: flex;
	align-items: stretch;
	justify-content: center;
	gap: 0;
	list-style: none;
	margin: 0;
	padding: 0;
	height: 100%;
}

/* ============================================
   Menu Items
   ============================================ */

.pure-menu__item {
	list-style: none;
	margin: 0;
	padding: 0;
	position: relative;
	
	// Mega menu items need static positioning to span full width
	&--mega {
		position: static;
	}
	
	// Root level items - links fill full height
	&--root {
		display: flex;
		align-items: stretch;
		height: 100%;
		padding: 0 1rem;
		
		> .pure-menu__link {
			height: 100%;
			padding: 0;
		}
	}
}

/* ============================================
   Menu Links
   ============================================ */

.pure-menu__link {
	display: block;
	color: var(--menu-text-color, #333);
	text-decoration: none;
	font-weight: 500;
	font-size: var(--menu-font-size, 14px);
	text-transform: var(--menu-text-transform, uppercase);
	letter-spacing: 0.75px;
	transition: color 0.2s ease;
	white-space: nowrap;
	position: relative;
	
	&::after {
		content: '';
		position: absolute;
		bottom: 0;
		left: 0;
		width: 0;
		height: 2px;
		background: var(--menu-hover-color, #000);
		transition: width 0.3s ease;
	}
	
	// Root level links need flex to center content
	.pure-menu__item--root > & {
		display: flex;
		align-items: center;
		justify-content: center;
	}
	
	.pure-menu__item--root:hover > &,
	.pure-menu__item--root:focus-within > &,
	&:hover,
	&:focus {
		color: var(--menu-hover-color, #000);
		outline: none;
		
		&::after {
			width: 100%;
		}
	}
	
	// Active/Current menu item styles - show underline
	.current-menu-item > &,
	.current-menu-parent > &,
	.current-menu-ancestor > &,
	.current_page_item > &,
	.current_page_parent > &,
	.current_page_ancestor > & {
		color: var(--menu-hover-color, #000);
		font-weight: 600;
		
		&::after {
			width: 100%;
		}
	}
}

.pure-menu__text {
	display: block;
}

/* ============================================
   Standard Dropdown Submenu
   ============================================ */

.pure-submenu--dropdown {
	position: absolute;
	top: 100%;
	left: 0;
	min-width: 240px;
	background: var(--menu-bg-color, #fff);
	border: 1px solid rgba(0, 0, 0, 0.08);
	list-style: none;
	margin: 0;
	padding: 0.75rem 0;
	opacity: 0;
	visibility: hidden;
	pointer-events: none;
	transition: opacity 0.2s ease, visibility 0.2s;
	z-index: 1000;
	margin-top: 0;
	
	// Show on parent hover/focus
	.pure-menu__item--has-children:hover > &,
	.pure-menu__item--has-children:focus-within > & {
		opacity: 1;
		visibility: visible;
		pointer-events: auto;
	}
	
	.pure-menu__item {
		margin: 0;
		display: block;
		position: relative;
		padding: 0 1.5rem;
	}
	
	.pure-menu__link {
		display: inline-block;
		padding: 0.75rem 0;
		color: var(--menu-text-color, #555);
		font-size: calc(var(--menu-font-size, 14px) - 1px);
		text-transform: none;
		letter-spacing: normal;
		font-weight: 400;
		white-space: nowrap;
	}
	
	// Active dropdown items
	.current-menu-item > .pure-menu__link,
	.current_page_item > .pure-menu__link {
		color: var(--menu-hover-color, #000);
		font-weight: 600;
		
		&::after {
			width: 100%;
		}
	}
}

/* ============================================
   Mega Menu - Full Width Dropdown
   ============================================ */

.pure-mega-menu {
	position: absolute;
	top: 100%;
	left: 0;
	width: 100vw;
	margin-left: calc(-50vw + 50%);
	margin-top: 0;
	background: var(--menu-bg-color, #fff);
	border-top: 1px solid rgba(0, 0, 0, 0.08);
	border-bottom: 1px solid rgba(0, 0, 0, 0.08);
	opacity: 0;
	visibility: hidden;
	pointer-events: none;
	z-index: 999;
	transition: opacity 0.2s ease, visibility 0.2s;
	
	// Show on parent hover/focus with slight delay
	.pure-menu__item--mega:hover > &,
	.pure-menu__item--mega:focus-within > & {
		opacity: 1;
		visibility: visible;
		pointer-events: auto;
		transition-delay: 0.05s;
	}
}

.pure-mega-menu__inner {
	max-width: 1400px;
	width: 100%;
	margin: 0 auto;
	padding: 3rem 2rem;
}

.pure-mega-menu__columns {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
	gap: 4rem 3rem;
	list-style: none;
	margin: 0;
	padding: 0;
}

.pure-mega-menu__column {
	list-style: none;
	margin: 0;
	padding: 0;
}

.pure-mega-menu__heading {
	margin: 0 0 0.75rem;
	padding: 0;
	font-size: 0.8125rem;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: 1px;
	color: var(--menu-text-color, #000);
}

.pure-mega-menu__items {
	list-style: none;
	margin: 0;
	padding: 0;
	
	.pure-menu__item {
		margin: 0;
		display: block;
	}
	
	.pure-menu__link {
		display: inline-block;
		padding: 0.625rem 0;
		color: var(--menu-text-color, #666);
		font-size: calc(var(--menu-font-size, 14px) - 1px);
		text-transform: none;
		letter-spacing: 0.25px;
		font-weight: 400;
		white-space: normal;
		line-height: 1.5;
	}
	
	// Active mega menu items
	.current-menu-item > .pure-menu__link,
	.current_page_item > .pure-menu__link {
		color: var(--menu-hover-color, #000);
		font-weight: 600;
		
		&::after {
			width: 100%;
		}
	}
}

/* ============================================
   Accessibility
   ============================================ */

.skip-link {
	position: absolute;
	left: -9999px;
	top: 0;
	z-index: 999999;
	padding: 1rem 1.5rem;
	background: #000;
	color: #fff;
	text-decoration: none;
	font-weight: 600;
	
	&:focus {
		left: 1rem;
		top: 1rem;
		outline: 3px solid var(--menu-hover-color, #000);
		outline-offset: 3px;
	}
}
